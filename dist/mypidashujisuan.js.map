{"version":3,"sources":["mypidashujisuan.js"],"names":["myptext","myshurukuangneirong","p","threadgeshu","x","piwei","myworker","eventdata","strt","finishflag","testname","lashentextarea","ids","setTimeout","value","document","getElementById","style","height","scrollHeight","mystart","worker1","Math","floor","title","String","Decimal","precision","console","log","time","Date","getTime","length","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","data","p1","add","max","parseInt","threadfinish","filter","timeEnd","endt","toString","terminate","body","onmousemove","onmouseover","onmousewheel","onscroll","onmousedown","alert","window","onload","mytestpi","navigator","userAgent","onclick"],"mappings":"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","file":"mypidashujisuan.js","sourceRoot":"..","sourcesContent":["(() => {\r\n    window.onload = mytestpi;\r\n    var myptext,\r\n        myshurukuangneirong,\r\n        p,\r\n        threadgeshu,\r\n        x,\r\n        piwei,\r\n        myworker,\r\n        eventdata,\r\n        strt,\r\n        finishflag,\r\n        durt,\r\n        endt,\r\n        testname;\r\n    function lashentextarea(...ids) {\r\n        setTimeout(function () {\r\n            for (value of ids) {\r\n                var myptext = document.getElementById(value);\r\n\r\n                // textarea.scrollHeight = 60\r\n                // textarea.style.height = \"60px\"\r\n                // makeExpandingArea(textarea);\r\n                myptext.style.height = myptext.scrollHeight +2+ \"px\";\r\n            }\r\n        }, 0)\r\n    }\r\n    function mytestpi() {\r\n        getConstpinewhighefficiency105();\r\n    }\r\n\r\n    function getConstpinewhighefficiency105() {\r\n        document.getElementById(\"thread\").value = 8;\r\n        document.getElementById(\"pichangwei\").value = 4;\r\n        // jisuanfinishflag = 1;\r\n        threadgeshu = 8;\r\n        x = 0;\r\n        // piwei = 3000;\r\n\r\n        myptext = document.getElementById(\"tp\");\r\n        myshurukuangneirong = \" \";\r\n        myshurukuangneirong =\r\n            myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\r\n        myshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\r\n        myptext.value = myshurukuangneirong;\r\n        document.getElementById(\"start\").onclick = mystart;\r\n        lashentextarea(\"tp\", \"tp2\")\r\n        // setTimeout(function() {\r\n        //   myptext.style.height = myptext.scrollHeight + \"px\";\r\n        // }, 0);\r\n    }\r\n\r\n    function mystart() {\r\n        // jisuanfinishflag = 0;\r\n\r\n        if (\r\n            document.getElementById(\"thread\").value >= 1 &&\r\n            document.getElementById(\"thread\").value <= 12 &&\r\n            document.getElementById(\"pichangwei\").value >= 1 &&\r\n            document.getElementById(\"pichangwei\").value <= 100\r\n        ) {\r\n            piwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\r\n            document.getElementById(\"pichangwei\").value = Math.floor(\r\n                document.getElementById(\"pichangwei\").value\r\n            );\r\n            threadgeshu = Math.floor(document.getElementById(\"thread\").value);\r\n            document.getElementById(\"thread\").value = threadgeshu;\r\n            testname = document.title =\r\n                \"圆周率计算多线程\" + \"-\" + \"线程数为\" + threadgeshu + \"-位数为\" + piwei;\r\n            myshurukuangneirong =\r\n                myshurukuangneirong + \"线程数为\" + threadgeshu+\" \" ;\r\n            myptext.value = myshurukuangneirong;\r\n            eventdata =\r\n                \"圆周率计算\" + piwei + \"位 \"  + \"计算圆周率中......\" + \"  \\n\";\r\n\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            Decimal.precision = piwei;\r\n            console.log(testname);\r\n            console.time(testname);\r\n            strt = new Date().getTime();\r\n            p = new Decimal(0);\r\n\r\n            myworker = [];\r\n            myworker.length = threadgeshu;\r\n\r\n            finishflag = [];\r\n            finishflag.length = threadgeshu;\r\n            var worker1;\r\n            if (typeof worker1 == \"undefined\") {\r\n                worker1 = new Worker(\"mythread1.js\");\r\n            }\r\n\r\n            for (var i = 0, len = threadgeshu; i < len; i++) {\r\n                myworker[i] = worker1;\r\n            }\r\n\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n                arr[index] = undefined;\r\n\r\n                arr[index] = new Worker(\"mythread1.js\");\r\n                arr[index].postMessage([piwei, threadgeshu, index]);\r\n                arr[index].onmessage = function (event) {\r\n                    console.log(\r\n                        \"主线程从副线程\" +\r\n                        (index + 1) +\r\n                        \"接收\" +\r\n                        \"event.data\\n\" +\r\n                        event.data\r\n                    );\r\n                    var p1 = new Decimal(event.data[0]);\r\n                    p = Decimal.add(p, p1);\r\n                    x = Math.max(x, parseInt(event.data[1]));\r\n                    finishflag[index] = 1;\r\n                    threadfinish();\r\n                };\r\n            });\r\n        } else {\r\n            alert(\"输入错误\");\r\n            document.getElementById(\"pichangwei\").value = 4;\r\n            document.getElementById(\"thread\").value = 8;\r\n        }\r\n    }\r\n\r\n    function threadfinish() {\r\n        if (\r\n            threadgeshu ==\r\n            finishflag.filter(function (currentValue) {\r\n                return currentValue == 1;\r\n            }).length\r\n        ) {\r\n            console.timeEnd(testname);\r\n            var endt = new Date().getTime();\r\n            durt = (endt - strt) / 1000;\r\n\r\n            eventdata =\r\n                \"计算完成,用时\" +\r\n                durt +\r\n                \"秒第\" +\r\n                x +\r\n                \"次 \" +\r\n                \"圆周率\" +\r\n                piwei +\r\n                \"位\\n\";\r\n            // +\r\n            // \"  \\n\" +\r\n            // p +\r\n            // \"  \\n\"\r\n            document.getElementById(\"tp2\").value =   \"圆周率\" +\r\n            piwei +\r\n            \"位\"+p.toString()\r\n            myptext = document.getElementById(\"tp\");\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            // jisuanfinishflag = 1;\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n                arr[index].terminate();\r\n            });\r\n            x = 0;\r\n            //alert(\"ok\")\r\n            setTimeout(function () {\r\n                // myptext.style.height = myptext.scrollHeight + \"px\";\r\n                lashentextarea(\"tp\", \"tp2\")\r\n            }, 0);\r\n            document.body.onmousemove=document.body.onmouseover=document.body.onmousewheel=\tdocument.body.onscroll=document.body.onmousedown =null\r\n        }\r\n    }\r\n})();\r\n"]}